{"version":3,"sources":["Music/Notes.tsx","reportWebVitals.js","index.tsx"],"names":["NoteLetter","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Mode","Note","letter","A","sharp","octave","noteLookup","noteIndex","indexOf","this","Math","pow","getNumber","offset","fromNumber","number","note","parseNote","floor","Modes","props","selectedRef","useRef","modes","value","push","filter","mode","isNaN","parseInt","ref","onChange","current","map","val","selected","currentMode","retNote","ExtensionState","range","start","end","Array","from","length","v","k","Notes","noteRef","startingNumber","startingNote","Grid","container","item","justify","num","toString","Extensions","seventh","Off","ninth","eleventh","Chord","base","Major","extensions","patterns","Minor","Root","Sus2","Sus4","notes","getExtensionOffset","extension","Flat","Normal","Sharp","console","log","ChordPiece","useState","setMode","setNote","Extension","firstRef","secondRef","thirdRef","updateExtension","targetIndex","targetState","checked","extensionState","direction","wrap","alignItems","FormControlLabel","style","margin","control","Checkbox","color","inputRef","ev","target","label","labelPlacement","setSeventh","setNinth","setEleventh","React","useEffect","chord","onChordChange","Box","pt","Paper","spacing","synth","Tone","volume","toDestination","Home","chordCount","setChordCount","toneSeq","fill","chordSequence","setSequence","setTempo","playing","setPlaying","a","dispose","stop","Button","variant","onClick","TextField","type","defaultValue","onBlur","newChordCount","slice","newSequence","newTempo","bpm","index","newChord","entry","seq","time","chordIndex","triggerAttackRelease","getArray","updateChordSequence","ReactDOM","render","StrictMode","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.b00fb922.chunk.js","sourcesContent":["import { Grid } from \"@material-ui/core\";\nimport { PassThrough } from \"node:stream\";\nimport React from \"react\";\nimport { useRef } from \"react\";\nimport Tone from 'tone';\n\n\nexport enum NoteLetter {\n  A = 'A',\n  B = 'B',\n  C = 'C',\n  D = 'D',\n  E = 'E',\n  F = 'F',\n  G = 'G'\n}\n\n\n\n\nexport class Note {\n  letter: NoteLetter = NoteLetter.A;\n  sharp: boolean =  false;\n  octave: number = 0;\n\n  public getNumber(): number {\n    const noteLookup = 'CDEFGBA';\n    let noteIndex = noteLookup.indexOf(this.letter) * 2;\n    if (noteIndex/2 > noteLookup.indexOf('B')) noteIndex -= 1;\n    if (noteIndex/2 > noteLookup.indexOf('E')) noteIndex -= 1;\n    \n    const num = (this.octave * 12) + noteIndex + (this.sharp ? 1 : 0);\n    return num;\n  }\n\n  public getFreq(): number {\n    const twelfth_root = 1.059463094359;\n    return Math.pow(twelfth_root, this.getNumber() - 49) * 440;\n  }\n\n  public static fromNumber(number: number): Note {\n    const notes: Note[] = [\n  \n      parseNote(\"C\"),\n      parseNote(\"C#\"),\n      parseNote(\"D\"),\n      parseNote(\"D#\"),\n      parseNote(\"E\"),\n      parseNote(\"F\"),\n      parseNote(\"F#\"),\n      parseNote(\"G\"),\n      parseNote(\"G#\"),\n      parseNote(\"A\"),\n      parseNote(\"A#\"),\n      parseNote(\"B\"),\n    ];\n    \n    \n    let note = notes[number % 12];\n    const octave = Math.floor(number / 12);\n\n    note.octave = octave;\n    return note;\n  }\n\n  // Get the note that is offset from this one by `offset` half-steps\n  public offset(offset: number): Note {\n    return Note.fromNumber(this.getNumber() + offset);\n  }\n\n  // Takes the form of A#3\n  public toString(): string {\n    return this.letter + (this.sharp ? '#' : '') + this.octave;\n  }\n}\n\nexport enum Mode {\n  Root = \"Root\",\n  Major = \"Major\",\n  Minor = \"Minor\",\n  Sus2 = \"Sus2\",\n  Sus4 = \"Sus4\",\n}\n\nexport function Modes(props: { onChange(mode: Mode): void, currentMode: Mode }): React.ReactElement {\n  const selectedRef = useRef<HTMLSelectElement>(null);\n\n  let modes = [];\n\n  for (const value in Mode) {\n    modes.push(value);\n  }\n\n  modes = modes.filter((mode) => isNaN(parseInt(mode)));\n\n  return (\n    <select\n      ref={selectedRef}\n      onChange={() =>\n        props.onChange((selectedRef.current?.value as any) as Mode)\n      }\n    >\n      {modes.map((val) => (\n        <option key={val} value={val} selected={val===props.currentMode}>\n          {val}\n        </option>\n      ))}\n    </select>\n  );\n}\n\n\n// Takes the form of A#3\nexport function parseNote(note: string): Note {\n    const letter = note[0];\n    const sharp = note[1] === \"#\";\n    \n    let octave: number;\n  if (note[1] && note[2])\n    octave = parseInt(note[2]);\n  else if (!sharp)\n    octave = parseInt(note[1]);\n  else\n    octave = 0;\n  \n  let retNote = new Note();\n  retNote.letter = letter as NoteLetter;\n  retNote.octave = octave;\n  retNote.sharp = sharp;\n\n  return retNote;\n}\n\n\n\nexport const range = (start: number, end: number) => Array.from({length: (end - start)}, (v, k) => k + start);\n\nexport interface NotesProps {\n  startingNote: Note,\n  onChange: (note: Note) => void\n}\n\nexport function Notes(props: NotesProps): React.ReactElement {\n  const noteRef = useRef<HTMLSelectElement>(null);\n  const startingNumber = props.startingNote.getNumber();\n\n\n\n  return (\n    <Grid container item justify=\"center\">\n      <select ref={noteRef} onChange={() => props.onChange(Note.fromNumber(parseInt(noteRef.current?.value ?? 'A0' /*We need to explicitly nullcheck here even though it's impossible for this to ever be null */)))}>\n        {range(0, 12).map((num) => {\n          return (<option key={num} value={startingNumber + num}> {props.startingNote.offset(num).toString()} </option>);\n        })}\n      </select>\n    </Grid>);\n}\n\nexport enum ExtensionState {\n  Off = 0,\n  Normal = 1,\n  Flat = 2,\n  Sharp = 3,\n}\n\nexport class Extensions {\n  seventh: ExtensionState = ExtensionState.Off;\n  ninth: ExtensionState = ExtensionState.Off;\n  eleventh: ExtensionState = ExtensionState.Off;\n}\n\nexport class Chord {\n  base: Note;\n  mode: Mode;\n  extensions: Extensions;\n\n  constructor(base: Note = parseNote(\"C4\"), mode: Mode = Mode.Major, extensions: Extensions = new Extensions()) {\n    this.base = base;\n    this.mode = mode;\n    this.extensions = extensions;\n  }\n\n  public getArray(): string[] {\n    const patterns: { [K in Mode]: number[] } = {\n      [Mode.Major]: [0, 4, 7],\n      [Mode.Minor]: [0, 3, 7],\n      [Mode.Root]: [0, 7],\n      [Mode.Sus2]: [0, 2, 7],\n      [Mode.Sus4]: [0, 5, 7]\n    };\n  \n    let notes = [];\n  \n    for (let num of patterns[this.mode]) {\n      notes.push(this.base.offset(num).toString());\n    }\n\n    // TODO: Calculate these offsets instead of hardcoding them\n    // Seventh = 10 half-steps\n    // Ninth = 14 half-steps\n    // Eleventh = 17 half-steps\n\n    console.log(this.extensions);\n\n    \n    function getExtensionOffset(extension: ExtensionState.Flat | ExtensionState.Normal | ExtensionState.Sharp): number {\n      return [-1, 0, 1][[ExtensionState.Flat, ExtensionState.Normal, ExtensionState.Sharp].indexOf(extension)];\n    }\n\n    if (this.extensions.seventh !== ExtensionState.Off)\n      notes.push(this.base.offset(10 + getExtensionOffset(this.extensions.seventh)).toString());\n    \n    if (this.extensions.ninth !== ExtensionState.Off)\n      notes.push(this.base.offset(14 + getExtensionOffset(this.extensions.ninth)).toString());\n      \n    \n    if (this.extensions.eleventh !== ExtensionState.Off)\n      notes.push(this.base.offset(17 + getExtensionOffset(this.extensions.eleventh)).toString());\n      \n\n  \n    return notes;\n  }\n}\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React, { useState, useRef, FocusEvent } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { parseNote, Notes, Mode, Modes, Chord, range, ExtensionState, Extensions } from \"./Music/Notes\";\nimport {\n  Box,\n  Grid,\n  Paper,\n  Checkbox,\n  FormControlLabel,\n  TextField,\n  Button,\n  CssBaseline,\n} from \"@material-ui/core\";\nimport * as Tone from \"tone\";\nimport { Clock } from \"tone\";\nimport { spacing } from \"@material-ui/system\";\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n\n\nfunction ChordPiece(props: {\n  chord: Chord;\n  onChordChange: (chord: Chord) => void;\n  index: number;\n}): React.ReactElement {\n\n  const [mode, setMode] = useState(Mode.Major);\n  const [note, setNote] = useState(parseNote(\"C4\"));\n\n  function Extension(props: {\n    number: number;\n    extensionState: ExtensionState;\n    updateExtension(newExtension: ExtensionState): void;\n  }): React.ReactElement {\n    const firstRef = useRef<HTMLInputElement>(null);\n    const secondRef = useRef<HTMLInputElement>(null);\n    const thirdRef = useRef<HTMLInputElement>(null);\n\n    function updateExtension(targetIndex: 0 | 1 | 2, targetState: boolean) {\n      if (targetState == false) {\n        props.updateExtension(ExtensionState.Off);\n        return;\n      }\n      if (\n        firstRef.current === null ||\n        secondRef.current === null ||\n        thirdRef.current === null\n      )\n        return;\n\n      firstRef.current.checked = false;\n      secondRef.current.checked = false;\n      thirdRef.current.checked = false;\n\n      [firstRef.current, secondRef.current, thirdRef.current][\n        targetIndex\n      ].checked = true;\n\n\n      let extensionState = [ExtensionState.Flat, ExtensionState.Normal, ExtensionState.Sharp][targetIndex];\n\n      props.updateExtension(extensionState);\n    }\n\n    return (\n      <Grid\n        container\n        item\n        direction=\"row\"\n        justify=\"space-between\"\n        wrap=\"nowrap\"\n        alignItems=\"center\"\n      >\n        <FormControlLabel\n          style={{ margin: 0 }}\n          control={\n            <Checkbox\n              color=\"secondary\"\n              inputRef={firstRef}\n              checked={props.extensionState == ExtensionState.Flat}\n              onChange={(ev) => updateExtension(0, ev.target.checked)}\n            />\n          }\n          label=\"♭\"\n          labelPlacement=\"top\"\n        />\n        <FormControlLabel\n          style={{ margin: 0 }}\n          control={\n            <Checkbox\n              color=\"secondary\"\n              inputRef={secondRef}\n              checked={props.extensionState == ExtensionState.Normal}\n              onChange={(ev) => updateExtension(1, ev.target.checked)}\n            />\n          }\n          label={props.number}\n          labelPlacement=\"top\"\n        />\n        <FormControlLabel\n          style={{ margin: 0 }}\n          control={\n            <Checkbox\n              color=\"secondary\"\n              inputRef={thirdRef}\n              checked={props.extensionState == ExtensionState.Sharp}\n              onChange={(ev) => updateExtension(2, ev.target.checked)}\n            />\n          }\n          label=\"♯\"\n          labelPlacement=\"top\"\n        />\n      </Grid>\n    );\n  }\n\n  const [seventh, setSeventh] = useState(ExtensionState.Off);\n  const [ninth, setNinth] = useState(ExtensionState.Off);\n  const [eleventh, setEleventh] = useState(ExtensionState.Off);\n\n\n  React.useEffect(() => {\n    const chord = new Chord(note, mode, { seventh, ninth, eleventh });\n    props.onChordChange(chord);\n  }, [mode, note, seventh, ninth, eleventh]);\n\n  return (\n    <Box pt={1}>\n      <Paper>\n        <Grid\n          container\n          item\n          direction=\"column\"\n          alignItems=\"stretch\"\n          justify=\"space-around\"\n          spacing={2}\n        >\n          <Notes startingNote={parseNote(\"C4\")} onChange={setNote}></Notes>\n          <Grid container item justify=\"center\">\n            <Modes onChange={setMode} currentMode={mode}></Modes>\n          </Grid>\n          <Grid container item direction=\"column\" alignItems=\"center\">\n            <Extension\n              number={7}\n              extensionState={seventh}\n              updateExtension={setSeventh}\n            />\n            <Extension\n              number={9}\n              extensionState={ninth}\n              updateExtension={setNinth}\n            />\n            <Extension\n              number={11}\n              extensionState={eleventh}\n              updateExtension={setEleventh}\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n    </Box>\n  );\n}\n\nconst synth = new Tone.PolySynth(Tone.Synth, { volume: -15 }).toDestination();\nTone.Transport.bpm.value = 120;\n\nfunction Home(): React.ReactElement {\n  const [chordCount, setChordCount] = useState(4);\n\n  const toneSeq = useRef<Tone.Sequence<number>>();\n  const [chordSequence, setSequence] = useState<Chord[]>(\n    Array(chordCount).fill(new Chord())\n  );\n\n  function consolidateChordCount(ev: FocusEvent<HTMLInputElement>) {\n    let newChordCount = parseInt(ev.target.value);\n    if (isNaN(newChordCount)) {\n      newChordCount = 0;\n    }\n\n    setChordCount(newChordCount);\n\n    if (chordSequence.length > newChordCount) {\n      setSequence(chordSequence.slice(0, newChordCount));\n    } else if (chordSequence.length < newChordCount) {\n      let newSequence = chordSequence.slice();\n      while (newSequence.length < newChordCount) newSequence.push(new Chord());\n\n      setSequence(newSequence);\n    }\n  }\n\n  function updateChordSequence(entry: Chord, index: number) {\n    let newSequence = chordSequence.slice();\n    newSequence[index] = entry;\n    setSequence(newSequence);\n\n    if(toneSeq.current)\n      toneSeq.current.dispose();\n\n    const seq = new Tone.Sequence(\n      (time, chordIndex) => {\n        synth.triggerAttackRelease(\n          newSequence[chordIndex].getArray(),\n          \"8n\",\n          time\n        );\n        // subdivisions are given as subarrays\n      },\n      range(0, chordCount),\n      \"4n\"\n    ).start(0);\n    toneSeq.current = seq;\n  }\n\n  const [tempo, setTempo] = useState(120);\n  function consolidateTempo(ev: FocusEvent<HTMLInputElement>) {\n    let newTempo = parseInt(ev.target.value);\n    if (isNaN(newTempo)) {\n      newTempo = 120;\n    }\n\n    setTempo(newTempo);\n    Tone.Transport.bpm.value = newTempo;\n  }\n\n  const [playing, setPlaying] = useState(false);\n  async function togglePlay() {\n    if (playing === false) {\n      await Tone.start();\n      setPlaying(true);\n      // const seq = new Tone.Sequence(\n      //   (time, chordIndex) => {\n      //     synth.triggerAttackRelease(\n      //       chordSequence[chordIndex].getArray(),\n      //       \"8n\",\n      //       time + 0.1\n      //     );\n      //     // subdivisions are given as subarrays\n      //   },\n      //   range(0, chordCount),\n      //   \"4n\"\n      // ).start(0);\n      // toneSeq.current = seq;\n      Tone.Transport.start(\"+0.1\");\n    } else {\n      toneSeq.current?.dispose();\n      Tone.Transport.stop();\n      setPlaying(false);\n    }\n  }\n\n  return (\n    <Box>\n      <Button variant=\"contained\" onClick={togglePlay}>\n        {playing === false ? \"Start\" : \"Stop\"}\n      </Button>\n      <TextField\n        type=\"number\"\n        defaultValue={4}\n        onBlur={consolidateChordCount}\n        label=\"Note Count\"\n      />\n      <TextField\n        type=\"number\"\n        defaultValue={120}\n        onBlur={consolidateTempo}\n        label=\"Tempo (BPM)\"\n      />\n      <Grid container>\n        {chordSequence.map((chord: Chord, index: number) => (\n          <ChordPiece\n            key={index}\n            chord={chord}\n            index={index}\n            onChordChange={(newChord) => updateChordSequence(newChord, index)}\n          />\n        ))}\n      </Grid>\n    </Box>\n  );\n}\n\n{\n  ReactDOM.render(\n    <React.StrictMode>\n      <CssBaseline />\n      <Home />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  );\n}\n"],"sourceRoot":""}