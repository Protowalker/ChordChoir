(this["webpackJsonpchord-sequencer-static"]=this["webpackJsonpchord-sequencer-static"]||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var r,a=n(137),c=n(68),i=n(140),u=n(141),s=n(145),o=n(0),l=n.n(o),f=n(17),b=n.n(f),h=n(27),j=(n(94),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,149)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))}),d=n(3),v=n.n(d),O=n(8),p=n(9),g=n(14),x=n(20),m=n(2),k=n(1),y=n(134),w=n(147),C=n(146),S=n(138),N=n(52),I=n(61),E=n(12);!function(e){e.A="A",e.B="B",e.C="C",e.D="D",e.E="E",e.F="F",e.G="G"}(r||(r={}));var F,M=function(){function e(){Object(k.a)(this,e),this.letter=r.A,this.sharp=!1,this.octave=0}return Object(m.a)(e,[{key:"getNumber",value:function(){var e="CDEFGAB",t=2*e.indexOf(this.letter);return t/2>e.indexOf("E")&&(t-=1),12*this.octave+t+(this.sharp?1:0)}},{key:"getFreq",value:function(){return 440*Math.pow(1.059463094359,this.getNumber()-49)}},{key:"offset",value:function(t){return e.fromNumber(this.getNumber()+t)}},{key:"toString",value:function(){return this.letter+(this.sharp?"#":"")+this.octave}},{key:"getRelative",value:function(e){var t="";switch((this.getNumber()-e.getNumber())%12){case 0:t="I";break;case 1:t="#I";break;case 2:t="II";break;case 3:t="#II";break;case 4:t="III";break;case 5:t="IV";break;case 6:t="#IV";break;case 7:t="V";break;case 8:t="#V";break;case 9:t="VI";break;case 10:t="#VI";break;case 11:t="VII";break;default:t="???"}return t}}],[{key:"fromNumber",value:function(e){var t=[B("C").unwrap(),B("C#").unwrap(),B("D").unwrap(),B("D#").unwrap(),B("E").unwrap(),B("F").unwrap(),B("F#").unwrap(),B("G").unwrap(),B("G#").unwrap(),B("A").unwrap(),B("A#").unwrap(),B("B").unwrap()][e%12],n=Math.floor(e/12);return t.octave=n,t}}]),e}();function R(e){var t=Object(o.useRef)(null),n=[];for(var r in F)n.push(r);return n=n.filter((function(e){return isNaN(parseInt(e))})),Object(E.jsx)("select",{ref:t,onChange:function(){var n;return e.onChange(null===(n=t.current)||void 0===n?void 0:n.value)},children:n.map((function(t){return Object(E.jsx)("option",{value:t,selected:t===e.currentMode,children:t},t)}))})}!function(e){e.Root="Root",e.Major="Major",e.Minor="Minor",e.Sus2="Sus2",e.Sus4="Sus4"}(F||(F={}));var V=Object(I.a)("val"),A=function(){function e(t){Object(k.a)(this,e),Object.defineProperty(this,V,{writable:!0,value:void 0}),Object(N.a)(this,V)[V]=t}return Object(m.a)(e,[{key:"unwrap",value:function(){return Object(N.a)(this,V)[V]}},{key:"isSome",value:function(){return null!==Object(N.a)(this,V)[V]}}]),e}();function B(e){var t,n,a,c=null!==(t=null===(n=e[0])||void 0===n?void 0:n.toUpperCase())&&void 0!==t?t:"C",i="#"===e[1];if(a=e[1]&&e[2]?parseInt(e[2]):!i&&e[1]?parseInt(e[1]):4,!(c in r))return new A(null);var u=new M;return u.letter=c,u.octave=a,u.sharp=i,new A(u)}var D,P=function(e,t){return Array.from({length:t-e},(function(t,n){return n+e}))},J=l.a.memo((function(e){var t=Object(o.useRef)(null),n=e.startingNote.getNumber();console.log("note: "+e.startingNote.toString()+"number: "+n),l.a.useEffect((function(){var n,r;return e.onChange(M.fromNumber(parseInt(null!==(n=null===(r=t.current)||void 0===r?void 0:r.value)&&void 0!==n?n:"0")))}),[e.startingNote]);var r=l.a.useCallback((function(t){return e.startingNote.offset(t).toString()+"    "+("("+e.startingNote.offset(t).getRelative(e.startingNote)+")")}),[e.startingNote]);return Object(E.jsx)(y.a,{container:!0,item:!0,justify:"center",children:Object(E.jsx)("select",{ref:t,onChange:function(){var n,r;return e.onChange(M.fromNumber(parseInt(null!==(n=null===(r=t.current)||void 0===r?void 0:r.value)&&void 0!==n?n:"0")))},children:P(0,12).map((function(e){return Object(E.jsxs)("option",{value:n+e,children:[" ",r(e)," "]},e)}))})})})),G=n(144);!function(e){e[e.Off=0]="Off",e[e.Normal=1]="Normal",e[e.Flat=2]="Flat",e[e.Sharp=3]="Sharp"}(D||(D={}));var K=function e(){Object(k.a)(this,e),this.seventh=D.Off,this.ninth=D.Off,this.eleventh=D.Off},q=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B("C4").unwrap(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.Major,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new K;Object(k.a)(this,e),this.base=void 0,this.mode=void 0,this.extensions=void 0,this.base=t,this.mode=n,this.extensions=r}return Object(m.a)(e,[{key:"getArray",value:function(){var e,t,n=(e={},Object(x.a)(e,F.Major,[0,4,7]),Object(x.a)(e,F.Minor,[0,3,7]),Object(x.a)(e,F.Root,[0,7]),Object(x.a)(e,F.Sus2,[0,2,7]),Object(x.a)(e,F.Sus4,[0,5,7]),e),r=[],a=Object(g.a)(n[this.mode]);try{for(a.s();!(t=a.n()).done;){var c=t.value;r.push(this.base.offset(c).toString())}}catch(u){a.e(u)}finally{a.f()}function i(e){return[-1,0,1][[D.Flat,D.Normal,D.Sharp].indexOf(e)]}return this.extensions.seventh!==D.Off&&r.push(this.base.offset(10+i(this.extensions.seventh)).toString()),this.extensions.ninth!==D.Off&&r.push(this.base.offset(14+i(this.extensions.ninth)).toString()),this.extensions.eleventh!==D.Off&&r.push(this.base.offset(17+i(this.extensions.eleventh)).toString()),r}},{key:"isEqual",value:function(e){return JSON.stringify(this)===JSON.stringify(e)}}]),e}(),L=l.a.memo((function(e){var t=Object(o.useRef)(null),n=Object(o.useRef)(null),r=Object(o.useRef)(null),a=l.a.useCallback((function(a,c){if(!1!==c){if(null!==t.current&&null!==n.current&&null!==r.current){t.current.checked=!1,n.current.checked=!1,r.current.checked=!1,[t.current,n.current,r.current][a].checked=!0;var i=[D.Flat,D.Normal,D.Sharp][a];e.updateExtension(i)}}else e.updateExtension(D.Off)}),[e]);return Object(E.jsxs)(y.a,{container:!0,item:!0,direction:"row",justify:"space-between",wrap:"nowrap",alignItems:"center",children:[Object(E.jsx)(w.a,{style:{margin:0},control:Object(E.jsx)(C.a,{color:"secondary",inputRef:t,checked:e.extensionState===D.Flat,onChange:function(e){return a(0,e.target.checked)}}),label:"\u266d",labelPlacement:"top"}),Object(E.jsx)(w.a,{style:{margin:0},control:Object(E.jsx)(C.a,{color:"secondary",inputRef:n,checked:e.extensionState===D.Normal,onChange:function(e){return a(1,e.target.checked)}}),label:e.number,labelPlacement:"top"}),Object(E.jsx)(w.a,{style:{margin:0},control:Object(E.jsx)(C.a,{color:"secondary",inputRef:r,checked:e.extensionState===D.Sharp,onChange:function(e){return a(2,e.target.checked)}}),label:"\u266f",labelPlacement:"top"})]})})),T=Object(a.a)((function(e){return{inactive:{background:e.palette.background.paper},active:{background:e.palette.primary.dark}}})),U=l.a.memo((function(e){var t=Object(o.useState)(F.Major),n=Object(p.a)(t,2),r=n[0],a=n[1],c=Object(o.useState)(B("C4").unwrap()),i=Object(p.a)(c,2),u=i[0],f=i[1],b=Object(o.useState)(D.Off),h=Object(p.a)(b,2),j=h[0],d=h[1],v=Object(o.useState)(D.Off),O=Object(p.a)(v,2),g=O[0],x=O[1],m=Object(o.useState)(D.Off),k=Object(p.a)(m,2),w=k[0],C=k[1],N=e.onChordChange,I=e.index,M=e.baseKey;l.a.useEffect((function(){var e=new q(u,r,{seventh:j,ninth:g,eleventh:w});N(e,I)}),[r,u,j,g,w,I]);var V=T(),A=Object(G.a)({type:"Chord"}),P=Object(p.a)(A,2);P[0],P[1];return Object(E.jsx)(s.a,{pt:1,mr:1,mt:.5,ref:e.ref,children:Object(E.jsx)(S.a,{elevation:5,className:e.active?V.active:V.inactive,children:Object(E.jsxs)(y.a,{container:!0,item:!0,direction:"column",alignItems:"stretch",justify:"space-around",spacing:2,children:[Object(E.jsx)(J,{startingNote:M,onChange:f}),Object(E.jsx)(y.a,{container:!0,item:!0,justify:"center",children:Object(E.jsx)(R,{onChange:a,currentMode:r})}),Object(E.jsxs)(y.a,{container:!0,item:!0,direction:"column",alignItems:"center",children:[Object(E.jsx)(L,{number:7,extensionState:j,updateExtension:d}),Object(E.jsx)(L,{number:9,extensionState:g,updateExtension:x}),Object(E.jsx)(L,{number:11,extensionState:w,updateExtension:C})]})]})})})}),(function(e,t){return JSON.stringify(e)===JSON.stringify(t)})),z=function(e,t){switch(t.kind){case"add":var n=e.slice();return void 0===t.index&&(t.index=-1),n.splice(t.index,0,t.newChord),n;case"remove":var r=e.slice();return r.splice(t.startIndex,t.endIndex-t.startIndex),r;case"update":var a=e.slice();return a[t.index]=t.newChord,a;case"move":var c=e.slice(),i=c.splice(t.oldIndex,1)[0];return c.splice(t.newIndex,0,i),c;case"setLength":var u=e.slice(0,t.length);if(t.length>e.length)for(var s=e.length;s<t.length;s++)u.push(new q);return u}},H=n(139),Q=n(143),W=n(5),X=n(23);var Y=l.a.memo((function(e){var t=e.defaultValue,n=e.update,r=Object(X.a)(e,["defaultValue","update"]),a=Object(o.useState)(t),c=Object(p.a)(a,2),i=c[0],u=c[1],s=Object(o.useCallback)((function(e){var t,n;if(""!==(null===(t=e.target)||void 0===t?void 0:t.value)){var r=parseInt(null===(n=e.target)||void 0===n?void 0:n.value);!isNaN(r)&&isFinite(r)&&u(r)}else u(0)}),[]),l=Object(o.useCallback)((function(){return n(i)}),[n,i]);return Object(E.jsx)(Q.a,Object(W.a)({type:"number",value:i.toString(),onKeyDown:function(e){return function(e,t){"Enter"===e.key&&t(e)}(e,l)},onBlur:l,onClick:l,onChange:s},r))})),Z=function(e){var t=e.synth,n=Object(o.useState)(4),r=Object(p.a)(n,2),a=r[0],c=r[1],i=Object(o.useState)(120),u=Object(p.a)(i,2),l=u[0],f=u[1],b=Object(o.useState)(B("C4").unwrap()),j=Object(p.a)(b,2),d=j[0],g=j[1],x=Object(o.useState)(!1),m=Object(p.a)(x,2),k=m[0],w=m[1],C=Object(o.useRef)(),S=Object(o.useReducer)(z,null,(function(){return Array(a).fill(new q)})),N=Object(p.a)(S,2),I=N[0],F=N[1],M=Object(o.useState)(-1),R=Object(p.a)(M,2),V=R[0],A=R[1];Object(o.useEffect)((function(){F({kind:"setLength",length:a})}),[a]),Object(o.useEffect)((function(){if(k){h.d.bpm.value=l;var e=new h.b((function(e,n){A(n),t.triggerAttackRelease(I[n].getArray(),"8n",e)}),P(0,I.length),"4n").start(0);return C.current=e,function(){var e;null===(e=C.current)||void 0===e||e.dispose()}}}),[I,l,d,k,t]);var D=Object(o.useCallback)((function(e){for(var t,n,r=B(null!==(t=null===(n=e.target)||void 0===n?void 0:n.value)&&void 0!==t?t:"C4").unwrap(),a=0;a<I.length;a++){var c=I[a],i=new q(c.base,c.mode,c.extensions),u=i.base.getNumber()-d.getNumber();i.base=r.offset(u),F({kind:"update",index:a,newChord:i})}g(r)}),[I,d]);function J(){return(J=Object(O.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==k){e.next=7;break}return e.next=3,h.e();case 3:w(!0),h.d.start("+0.1"),e.next=11;break;case 7:null===(t=C.current)||void 0===t||t.dispose(),h.d.stop(),w(!1),A(-1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=Object(o.useCallback)((function(e,t){"Enter"===e.key&&t(e)}),[]),K=Object(o.useCallback)((function(e,t){F({kind:"update",index:e,newChord:t})}),[]),L=Object(o.useMemo)((function(){return{inputProps:{min:0,max:30}}}),[]),T=Object(o.useMemo)((function(){return{width:"25%"}}),[]);return Object(E.jsxs)(s.a,{children:[Object(E.jsxs)(y.a,{container:!0,direction:"row",alignItems:"flex-end",justify:"space-evenly",xs:3,children:[Object(E.jsx)(H.a,{variant:"contained",onClick:function(){return J.apply(this,arguments)},children:!1===k?"Start":"Stop"}),Object(E.jsx)(Y,{defaultValue:4,label:"Note Count",update:c,InputProps:L,style:T}),Object(E.jsx)(Y,{defaultValue:120,label:"Tempo (BPM)",update:f,style:T}),Object(E.jsx)(Q.a,{defaultValue:"C4",onKeyDown:function(e){return G(e,D)},onBlur:D,onClick:function(e){return D(e)},label:"Key",style:T})]}),Object(E.jsx)(y.a,{container:!0,children:I.map((function(e,t){return Object(E.jsx)(U,{baseKey:d,chord:e,index:t,onChordChange:function(e){return K(t,e)},active:V===t},t)}))})]})},$=n(142),_=n(69);j();var ee=new h.a(h.c,{volume:-15}).toDestination(),te=Object(a.a)((function(e){return{}})),ne=Object(c.a)({palette:{type:"dark"}});function re(){te();return Object(E.jsxs)(i.a,{theme:ne,children:[Object(E.jsx)(u.a,{}),Object(E.jsx)(s.a,{children:Object(E.jsx)($.a,{backend:_.a,children:Object(E.jsx)(Z,{synth:ee})})})]})}b.a.render(Object(E.jsx)(l.a.StrictMode,{children:Object(E.jsx)(re,{})}),document.getElementById("root"))},94:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.4a917170.chunk.js.map