(this["webpackJsonpchord-sequencer-static"]=this["webpackJsonpchord-sequencer-static"]||[]).push([[0],{213:function(e,t,n){},228:function(e,t,n){"use strict";n.r(t);var r,a=n(3),c=n.n(a),i=n(7),s=n(8),u=n(0),o=n.n(u),l=n(15),f=n.n(l),b=(n(213),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,269)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))}),h=n(71),j=n(191),O=n(1),d=n(2),v=n(255),p=n(11);!function(e){e.A="A",e.B="B",e.C="C",e.D="D",e.E="E",e.F="F",e.G="G"}(r||(r={}));var g,m=function(){function e(){Object(O.a)(this,e),this.letter=r.A,this.sharp=!1,this.octave=0}return Object(d.a)(e,[{key:"getNumber",value:function(){var e="CDEFGAB",t=2*e.indexOf(this.letter);return t/2>e.indexOf("E")&&(t-=1),12*this.octave+t+(this.sharp?1:0)}},{key:"getFreq",value:function(){return 440*Math.pow(1.059463094359,this.getNumber()-49)}},{key:"offset",value:function(t){return e.fromNumber(this.getNumber()+t)}},{key:"toString",value:function(){return this.letter+(this.sharp?"#":"")+this.octave}},{key:"getRelative",value:function(e){var t="";switch((this.getNumber()-e.getNumber())%12){case 0:t="I";break;case 1:t="#I";break;case 2:t="II";break;case 3:t="#II";break;case 4:t="III";break;case 5:t="IV";break;case 6:t="#IV";break;case 7:t="V";break;case 8:t="#V";break;case 9:t="VI";break;case 10:t="#VI";break;case 11:t="VII";break;default:t="???"}return t}}],[{key:"fromNumber",value:function(e){var t=[w("C").unwrap(),w("C#").unwrap(),w("D").unwrap(),w("D#").unwrap(),w("E").unwrap(),w("F").unwrap(),w("F#").unwrap(),w("G").unwrap(),w("G#").unwrap(),w("A").unwrap(),w("A#").unwrap(),w("B").unwrap()][e%12],n=Math.floor(e/12);return t.octave=n,t}}]),e}();function x(e){var t=Object(u.useRef)(null),n=[];for(var r in g)n.push(r);return n=n.filter((function(e){return isNaN(parseInt(e))})),Object(p.jsx)("select",{ref:t,onChange:function(){var n;return e.onChange(null===(n=t.current)||void 0===n?void 0:n.value)},children:n.map((function(t){return Object(p.jsx)("option",{value:t,selected:t===e.currentMode,children:t},t)}))})}!function(e){e.Root="Root",e.Major="Major",e.Minor="Minor",e.Sus2="Sus2",e.Sus4="Sus4"}(g||(g={}));var k=Object(j.a)("val"),y=function(){function e(t){Object(O.a)(this,e),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object(h.a)(this,k)[k]=t}return Object(d.a)(e,[{key:"unwrap",value:function(){return Object(h.a)(this,k)[k]}},{key:"isSome",value:function(){return null!==Object(h.a)(this,k)[k]}}]),e}();function w(e){var t,n,a,c=null!==(t=null===(n=e[0])||void 0===n?void 0:n.toUpperCase())&&void 0!==t?t:"C",i="#"===e[1];if(a=e[1]&&e[2]?parseInt(e[2]):!i&&e[1]?parseInt(e[1]):4,!(c in r))return new y(null);var s=new m;return s.letter=c,s.octave=a,s.sharp=i,new y(s)}var C,S=function(e,t){return Array.from({length:t-e},(function(t,n){return n+e}))},N=o.a.memo((function(e){var t=Object(u.useRef)(null),n=e.startingNote.getNumber();return console.log("note: "+e.startingNote.toString()+"number: "+n),o.a.useEffect((function(){var n,r;return e.onChange(m.fromNumber(parseInt(null!==(n=null===(r=t.current)||void 0===r?void 0:r.value)&&void 0!==n?n:"0")))}),[e.startingNote]),Object(p.jsx)(v.a,{container:!0,item:!0,justify:"center",children:Object(p.jsx)("select",{ref:t,onChange:function(){var n,r;return e.onChange(m.fromNumber(parseInt(null!==(n=null===(r=t.current)||void 0===r?void 0:r.value)&&void 0!==n?n:"0")))},children:S(0,12).map((function(t){return Object(p.jsxs)("option",{value:n+t,children:[" ",e.startingNote.offset(t).toString()," (",e.startingNote.offset(t).getRelative(e.startingNote),") "]},t)}))})})})),I=n(12),E=n(19),F=n(258),R=n(267),M=n(266),A=n(231),B=n(52),D=n(260);!function(e){e[e.Off=0]="Off",e[e.Normal=1]="Normal",e[e.Flat=2]="Flat",e[e.Sharp=3]="Sharp"}(C||(C={}));var V=function e(){Object(O.a)(this,e),this.seventh=C.Off,this.ninth=C.Off,this.eleventh=C.Off},P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w("C4").unwrap(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.Major,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new V;Object(O.a)(this,e),this.base=void 0,this.mode=void 0,this.extensions=void 0,this.base=t,this.mode=n,this.extensions=r}return Object(d.a)(e,[{key:"getArray",value:function(){var e,t,n=(e={},Object(E.a)(e,g.Major,[0,4,7]),Object(E.a)(e,g.Minor,[0,3,7]),Object(E.a)(e,g.Root,[0,7]),Object(E.a)(e,g.Sus2,[0,2,7]),Object(E.a)(e,g.Sus4,[0,5,7]),e),r=[],a=Object(I.a)(n[this.mode]);try{for(a.s();!(t=a.n()).done;){var c=t.value;r.push(this.base.offset(c).toString())}}catch(s){a.e(s)}finally{a.f()}function i(e){return[-1,0,1][[C.Flat,C.Normal,C.Sharp].indexOf(e)]}return this.extensions.seventh!==C.Off&&r.push(this.base.offset(10+i(this.extensions.seventh)).toString()),this.extensions.ninth!==C.Off&&r.push(this.base.offset(14+i(this.extensions.ninth)).toString()),this.extensions.eleventh!==C.Off&&r.push(this.base.offset(17+i(this.extensions.eleventh)).toString()),r}},{key:"isEqual",value:function(e){return JSON.stringify(this)===JSON.stringify(e)}}]),e}(),G=o.a.memo((function(e){var t=Object(u.useRef)(null),n=Object(u.useRef)(null),r=Object(u.useRef)(null),a=o.a.useCallback((function(a,c){if(!1!==c){if(null!==t.current&&null!==n.current&&null!==r.current){t.current.checked=!1,n.current.checked=!1,r.current.checked=!1,[t.current,n.current,r.current][a].checked=!0;var i=[C.Flat,C.Normal,C.Sharp][a];e.updateExtension(i)}}else e.updateExtension(C.Off)}),[e]);return Object(p.jsxs)(v.a,{container:!0,item:!0,direction:"row",justify:"space-between",wrap:"nowrap",alignItems:"center",children:[Object(p.jsx)(F.a,{style:{margin:0},control:Object(p.jsx)(R.a,{color:"secondary",inputRef:t,checked:e.extensionState===C.Flat,onChange:function(e){return a(0,e.target.checked)}}),label:"\u266d",labelPlacement:"top"}),Object(p.jsx)(F.a,{style:{margin:0},control:Object(p.jsx)(R.a,{color:"secondary",inputRef:n,checked:e.extensionState===C.Normal,onChange:function(e){return a(1,e.target.checked)}}),label:e.number,labelPlacement:"top"}),Object(p.jsx)(F.a,{style:{margin:0},control:Object(p.jsx)(R.a,{color:"secondary",inputRef:r,checked:e.extensionState===C.Sharp,onChange:function(e){return a(2,e.target.checked)}}),label:"\u266f",labelPlacement:"top"})]})})),J=Object(D.a)({active:{background:B.a.blueGrey[100]}}),K=o.a.memo((function(e){var t=Object(u.useState)(g.Major),n=Object(s.a)(t,2),r=n[0],a=n[1],c=Object(u.useState)(w("C4").unwrap()),i=Object(s.a)(c,2),l=i[0],f=i[1],b=Object(u.useState)(C.Off),h=Object(s.a)(b,2),j=h[0],O=h[1],d=Object(u.useState)(C.Off),m=Object(s.a)(d,2),k=m[0],y=m[1],S=Object(u.useState)(C.Off),I=Object(s.a)(S,2),E=I[0],F=I[1],R=e.onChordChange,B=e.index,D=e.baseKey;o.a.useEffect((function(){var e=new P(l,r,{seventh:j,ninth:k,eleventh:E});R(e,B)}),[r,l,j,k,E,B]);var V=J();return Object(p.jsx)(M.a,{pt:1,children:Object(p.jsx)(A.a,{className:e.active?V.active:"",children:Object(p.jsxs)(v.a,{container:!0,item:!0,direction:"column",alignItems:"stretch",justify:"space-around",spacing:2,children:[Object(p.jsx)(N,{startingNote:D,onChange:f}),Object(p.jsx)(v.a,{container:!0,item:!0,justify:"center",children:Object(p.jsx)(x,{onChange:a,currentMode:r})}),Object(p.jsxs)(v.a,{container:!0,item:!0,direction:"column",alignItems:"center",children:[Object(p.jsx)(G,{number:7,extensionState:j,updateExtension:O}),Object(p.jsx)(G,{number:9,extensionState:k,updateExtension:y}),Object(p.jsx)(G,{number:11,extensionState:E,updateExtension:F})]})]})})})}),(function(e,t){return JSON.stringify(e)===JSON.stringify(t)&&e.onChordChange===t.onChordChange})),q=n(261),T=n(262),L=n(265),U=n(26);b();var z=new U.a(U.c,{volume:-15}).toDestination();function H(){var e=Object(u.useState)(4),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(u.useRef)(),o=Object(u.useState)(Array(n).fill(new P)),l=Object(s.a)(o,2),f=l[0],b=l[1],h=Object(u.useCallback)((function(e){var t=parseInt(e.target.value);if(isNaN(t)&&(t=0),r(t),f.length>t)m(f.slice(0,t)),b(f.slice(0,t));else if(f.length<t){for(var n=f.slice();n.length<t;)n.push(new P);m(n),b(n)}}),[f]),j=Object(u.useState)(-1),O=Object(s.a)(j,2),d=O[0],g=O[1],m=Object(u.useCallback)((function(e){console.log("called"),a.current&&a.current.dispose();var t=new U.b((function(t,n){g(n),z.triggerAttackRelease(e[n].getArray(),"8n",t)}),S(0,e.length),"4n").start(0);a.current=t}),[n]),x=Object(u.useCallback)((function(e,t){var n=f.slice();n[t]=e,b(n),m(n)}),[f,m]),k=Object(u.useState)(120),y=Object(s.a)(k,2),C=(y[0],y[1]),N=Object(u.useCallback)((function(e){var t=parseInt(e.target.value);isNaN(t)&&(t=120),C(t),U.d.bpm.value=t}),[]),I=Object(u.useState)(w("C4").unwrap()),E=Object(s.a)(I,2),F=E[0],R=E[1],A=Object(u.useCallback)((function(e){var t,n,r=w(null!==(t=null===(n=e.target)||void 0===n?void 0:n.value)&&void 0!==t?t:"C4").unwrap(),a=f.slice();for(var c in a){var i=a[c],s=new P(i.base,i.mode,i.extensions),u=s.base.getNumber()-F.getNumber();s.base=r.offset(u),a[c]=s}R(r),b(a),m(a)}),[f,m]),B=Object(u.useState)(!1),D=Object(s.a)(B,2),V=D[0],G=D[1];function J(){return(J=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==V){e.next=8;break}return e.next=3,U.e();case 3:G(!0),m(f),U.d.start("+0.1"),e.next=12;break;case 8:null===(t=a.current)||void 0===t||t.dispose(),U.d.stop(),G(!1),g(-1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=Object(u.useCallback)((function(e,t){"Enter"===e.key&&t(e)}),[]);return Object(p.jsxs)(M.a,{children:[Object(p.jsxs)(v.a,{container:!0,direction:"row",alignItems:"flex-end",justify:"space-evenly",xs:3,children:[Object(p.jsx)(q.a,{variant:"contained",onClick:function(){return J.apply(this,arguments)},children:!1===V?"Start":"Stop"}),Object(p.jsx)(T.a,{type:"number",defaultValue:4,onBlur:h,onKeyDown:function(e){return L(e,h)},onClick:function(e){return h(e)},label:"Note Count",InputProps:{inputProps:{min:0,max:30}},style:{width:"25%"}}),Object(p.jsx)(T.a,{type:"number",defaultValue:120,onKeyDown:function(e){return L(e,N)},onBlur:N,onClick:function(e){return N(e)},label:"Tempo (BPM)",style:{width:"25%"}}),Object(p.jsx)(T.a,{defaultValue:"C4",onKeyDown:function(e){return L(e,A)},onBlur:A,onClick:function(e){return A(e)},label:"Key",style:{width:"25%"}})]}),Object(p.jsx)(v.a,{container:!0,children:f.map((function(e,t){return Object(p.jsx)(K,{baseKey:F,chord:e,index:t,onChordChange:x,active:d===t},t)}))})]})}U.d.bpm.value=120,f.a.render(Object(p.jsxs)(o.a.StrictMode,{children:[Object(p.jsx)(L.a,{}),Object(p.jsx)(H,{})]}),document.getElementById("root"))}},[[228,1,2]]]);
//# sourceMappingURL=main.7e54ad94.chunk.js.map